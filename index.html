<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Functional Programming</title>
    <meta charset="utf-8" />
    <meta name="author" content=" Augusto Felix Marcolin" />
    <link href="index_files/remark-css/ninjutsu.css" rel="stylesheet" />
    <link href="index_files/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style\shinobi.css" type="text/css" />
    <link rel="stylesheet" href="style\ninpo.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Functional Programming
### <br>Augusto Felix Marcolin<br>
### <br>Julho 2019

---




class: middle bg-main1 hide-slide-number

.outline[
## Outline

* Introduction
* Functional Programming
* Purrr
* Demo
]

---


class: bg-main1 split-30 hide-slide-number

.column.bg-main3[
]
.column.slide-in-right[
.sliderbox.bg-main2.vmiddle[
.font3[Introduction]
]]

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/intro_me_1.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/intro_me_2.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/intro_me_3.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/intro_me_4.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---


class: bg-main1 split-30 hide-slide-number

.column.bg-main3[
]
.column.slide-in-right[
.sliderbox.bg-main2.vmiddle[
.font3[Functional Programming]
]]

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/intro_1.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/intro_2.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/intro_3.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/intro_4.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/intro_5.png" height="100%" width="100%"/&gt;
&lt;/div&gt;
---

class: middle center bg-main1 

# Five Elements of Functional Programming

---

background-image: url("./images/fp_element_1.png")
background-position: 50% 50%
background-size: cover
class: center, bottom, inverse

---


```r
y &lt;- c(4, 4, 4, 4)

my_print &lt;- function(x)
{
  print(x)
}

my_print(y)
```

```
## [1] 4 4 4 4
```

---

background-image: url("./images/fp_element_2.png")
background-position: 50% 50%
background-size: cover
class: center, bottom, inverse

---


```r
fatorial &lt;- function(x)
{
  fatorial &lt;- 1
  
  if(x == 0)
  {
    return(fatorial)
  }else{
    for(i in 1:x){
      fatorial = fatorial * i
    }
    return(fatorial)
  }
  
}

fatorial(5)
```

```
## [1] 120
```

---


```r
recursive_factorial &lt;- function(x) {
  if (x == 0){
    return (1)
  }else{
    return (x * recursive_factorial(x-1))
  }
}

recursive_factorial(5)
```

```
## [1] 120
```

---

background-image: url("./images/fp_element_3.png")
background-position: 50% 50%
background-size: cover
class: center, bottom, inverse


---


```r
area &lt;- function(r) {
  pi * r^2
}

x &lt;- area(3) + area(4)

y &lt;- (pi * 3^2) + (pi * 4^2)

identical(x, y)
```

```
## [1] TRUE
```

---

background-image: url("./images/fp_element_4.png")
background-position: 50% 50%
background-size: cover
class: center, bottom, inverse

---


```r
# first order

my_print &lt;- function(x)
{
  print(x)
}
```

--


```r
# high order

args(round)
```

```
## function (x, digits = 0) 
## NULL
```

```r
to_percentual &lt;- function(x, FUN = round, ...)
{
  percent &lt;- FUN(x * 100, ...)
  
  paste0(percent, "%")
}

to_percentual(0.1, digits = 2)
```

```
## [1] "10%"
```

---

background-image: url("./images/fp_element_5.png")
background-position: 50% 50%
background-size: cover
class: center, bottom, inverse

---


```r
library(pryr)

a &lt;- 1

end_1 &lt;- address(a)

a &lt;- 7

end_2 &lt;- address(a)

identical(end_1, end_2)
```

```
## [1] FALSE
```

---


class: bg-main1 split-30 hide-slide-number

.column.bg-main3[
.img-fill[![](images/purrr.png)]
]
.column.slide-in-right[
.sliderbox.bg-main2.vmiddle[
.font3[purrr]
]]

---

background-image: url("./images/three_dragons_meme.png")
background-position: 50% 50%
background-size: cover
class: center, bottom, inverse

---

class: middle center
&lt;div align = "center"&gt;
&lt;img src="./images/map.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---
# Lendo Arquivos: `for` Raizera


```r
files &lt;- list.files('../data/',
                    pattern = 'file',
                    full.names = T) #listando arquivos

list_tables &lt;- list() # criando variavel

for (i in 1:length(files)) {
  
list_tables[[i]] &lt;- read.csv(files[i])

}
```

---

# Lendo Arquivos: `map` Topzera



```r
library(dplyr)
library(purrr)

files &lt;- list.files('../data/',
                    pattern = 'file',
                    full.names = T) #listando arquivos

list_tables2 &lt;- map(files, read.csv)

identical(list_tables, list_tables2) # checando se sao identicos
```

```
## [1] TRUE
```

---

# Classes Elementos



```r
class(list_tables2)
```

```
## [1] "list"
```

--

# `map_`


```r
list_tables3 &lt;- map_df(files, read.csv, stringsAsFactors = F)

class(list_tables3)
```

```
## [1] "data.frame"
```

---

# Múltiplos argumentos


```r
files &lt;- list.files('../data/',
                    pattern = 'file',
                    full.names = T)

list_tables4 &lt;- map(files, read.csv, stringsAsFactors = F) # multiplos argumentos
```

---

# til(`~`) malandro


```r
list_tables4 &lt;- map(files, ~read.csv(., stringsAsFactors = F)) # mesma coisa
```


---
class: middle center bg-main1 

# Múltiplos argumentos variáveis

---
class: middle center

&lt;div align = "center"&gt;
&lt;img src="./images/map2.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---

# Stock Prices


```r
stock_prices &lt;- readRDS('../data/stock_prices.rds')

glimpse(stock_prices)
```

```
## Observations: 1,464
## Variables: 10
## $ price_open          &lt;dbl&gt; 19.95, 19.62, 19.59, 19.99, 21.40, 21.15, ...
## $ price_high          &lt;dbl&gt; 20.10, 19.79, 20.01, 20.78, 21.55, 21.47, ...
## $ price_low           &lt;dbl&gt; 19.70, 19.47, 19.54, 19.95, 21.09, 20.98, ...
## $ price_close         &lt;dbl&gt; 19.89, 19.72, 20.01, 20.41, 21.11, 21.04, ...
## $ volume              &lt;dbl&gt; 37053900, 38641200, 39141700, 69008900, 86...
## $ price_adjusted      &lt;dbl&gt; 19.01899, 18.85643, 19.13373, 19.51622, 20...
## $ ref_date            &lt;date&gt; 2018-07-30, 2018-07-31, 2018-08-01, 2018-...
## $ ticker              &lt;chr&gt; "PETR4.SA", "PETR4.SA", "PETR4.SA", "PETR4...
## $ ret_adjusted_prices &lt;dbl&gt; NA, -0.008547142, 0.014705857, 0.019990141...
## $ ret_closing_prices  &lt;dbl&gt; NA, -0.008547009, 0.014705934, 0.019990005...
```

--


```r
unique(stock_prices$ticker)
```

```
## [1] "PETR4.SA" "ABEV3.SA" "VVAR3.SA" "ITSA4.SA" "USIM5.SA" "SUZB3.SA"
```

---

# `map2()`


```r
files_name &lt;- sprintf('../data/prices_%s.csv', unique(stock_prices$ticker))

stock_prices %&gt;% 
  group_split(ticker) %&gt;% 
  map2(.x = ., .y = files_name, ~write.csv(x = .x, file = .y))
```

```
## [[1]]
## NULL
## 
## [[2]]
## NULL
## 
## [[3]]
## NULL
## 
## [[4]]
## NULL
## 
## [[5]]
## NULL
## 
## [[6]]
## NULL
```

---

# `walk()` | `walk2()`


```r
files_name &lt;- sprintf('../data/prices_%s.csv', unique(stock_prices$ticker))

stock_prices %&gt;% 
  group_split(ticker) %&gt;% 
  walk2(.x = ., .y = files_name, ~write.csv(x = .x, file = .y))
```

---

class: middle center bg-main1 

# Recursividade

---

class: middle center

&lt;div align = "center"&gt;
&lt;img src="./images/reduce.png" height="100%" width="100%"/&gt;
&lt;/div&gt;

---




```r
glimpse(time)
```

```
## Observations: 3
## Variables: 2
## $ jogador &lt;fct&gt; Fernandão, Braian Rodriguez, Claudio Milar
## $ time    &lt;fct&gt; Inter, Grêmio, Brasil-pel
```

```r
glimpse(altura)
```

```
## Observations: 3
## Variables: 2
## $ jogador &lt;fct&gt; Fernandão, Braian Rodriguez, Claudio Milar
## $ altura  &lt;fct&gt; 1.90, 1.93, 1.78
```

```r
glimpse(gols)
```

```
## Observations: 3
## Variables: 2
## $ jogador &lt;fct&gt; Fernandão, Braian Rodriguez, Claudio Milar
## $ gols    &lt;fct&gt; 225, 69, 187
```

---


```r
df &lt;- time %&gt;% 
  left_join(altura, by = 'jogador') %&gt;% 
  left_join(gols, by = 'jogador')

df
```

```
##            jogador       time altura gols
## 1        Fernandão      Inter   1.90  225
## 2 Braian Rodriguez     Grêmio   1.93   69
## 3    Claudio Milar Brasil-pel   1.78  187
```

---


```r
tabelas &lt;- list(time, altura, gols)

df_2 &lt;- reduce(tabelas, left_join, by = 'jogador')

df_2
```

```
##            jogador       time altura gols
## 1        Fernandão      Inter   1.90  225
## 2 Braian Rodriguez     Grêmio   1.93   69
## 3    Claudio Milar Brasil-pel   1.78  187
```

---


class: bg-main1 split-30 hide-slide-number

.column.bg-main3[
]
.column.slide-in-right[
.sliderbox.bg-main2.vmiddle[
.font3[Conclusion]
]]

---
class: middle bg-main1

&lt;center&gt;
&lt;h2&gt; Considerações FP/purrr: &lt;/h2&gt; 
&lt;/center&gt;

&lt;div class = "bullet2"&gt;
  &lt;ul&gt;
  &lt;li&gt; Por vezes, mais rápido &lt;/li&gt;
  &lt;li&gt; Sucinto &lt;/li&gt;
  &lt;li&gt; Elegante &lt;/li&gt;
  &lt;li&gt; Fácil de Ler e Debugar &lt;/li&gt;
  &lt;/ul&gt;
  &lt;/div&gt;

---

class: middle center bg-main1 

# Demo

&lt;div align = "center"&gt;
&lt;img src="./images/demo.gif" height="50%" width="50%"/&gt;
&lt;/div&gt;

---

class: bg-main5 middle center

&lt;div align = "center"&gt;
&lt;img src="./images/qr_code.png" height="30%" width="30%"/&gt;
&lt;/div&gt;

## [<i class="fas  fa-envelope-open "></i>](mailto:augustomarcolin@gmail.com) augustomarcolin@gmail.com
## [<i class="fab  fa-github "></i>](https://github.com/augustomarcolin) https://github.com/augustomarcolin
## [<i class="fab  fa-linkedin "></i>](https://www.linkedin.com/in/augusto-marcolin-1114a1b5) https://www.linkedin.com/in/augusto-marcolin-1114a1b5
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "monokai-sublime",
"highlightLines": true,
"countIncrementalSlides": false,
"seal": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
